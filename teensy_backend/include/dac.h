//---------------------------------------------------------------------------------------------------------------------------------------
// Header file for DAC class
//
// Author: Matteo Cartiglia <camatteo@ini.uzh.ch>
// Last updated: 15 JUL 2022 (Ciara Giles-Doran)
//---------------------------------------------------------------------------------------------------------------------------------------

#ifndef DAC_H
#define DAC_H

#include "Arduino.h"

class DAC 
{
  // ------------------------------------------ Declaring class constructor and public methods -----------------------------------------

  public:

    //----------------------------------------------------------------------------------------------------------------------------------
    // Class constructor; initialises the BiasGen object and sets up the relevant pins on Teensy
    //----------------------------------------------------------------------------------------------------------------------------------
    DAC(const int dac_rst, const int a0, const int a1);

    //----------------------------------------------------------------------------------------------------------------------------------
    // setupDAC: Sets up the relevant pins on Teensy
    //----------------------------------------------------------------------------------------------------------------------------------
    void setupDAC();

    //----------------------------------------------------------------------------------------------------------------------------------
    // join_I2C_bus: Joins the I2C bus
    //----------------------------------------------------------------------------------------------------------------------------------
    void join_I2C_bus();

    //----------------------------------------------------------------------------------------------------------------------------------
    // writeDAC: Writes valuse to the DAC
    //----------------------------------------------------------------------------------------------------------------------------------
    void writeDAC(uint8_t address, uint16_t value);

    //----------------------------------------------------------------------------------------------------------------------------------
    // turnReferenceOff: Turns off the internal reference voltage
    //----------------------------------------------------------------------------------------------------------------------------------
    void turnReferenceOff();


  // --------------------------------------------------- Declaring private variables -------------------------------------------------

  private:
    int _dac_rst;
    int _a0;
    int _a1;
};

#endif
